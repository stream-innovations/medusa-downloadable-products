"use strict";(self.webpackChunkmedia_products=self.webpackChunkmedia_products||[]).push([[850],{13008:(e,r,s)=>{s.d(r,{TD:()=>p});for(var t=s(89526),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Map,l=0;l<a.length;l++){var o=l.toString(2),i=6-o.length;o="0".repeat(i)+o,n.set(a.charCodeAt(l),o)}function c(e){for(var r="",s=0;s<e.length;s++)r+=n.get(e.charCodeAt(s));r=r.slice(0,r.length-r.length%8);for(var t=[],a=0;a<r.length/8;a++)t.push(r.slice(8*a,8*a+8));return t}function d(e){return c(e=(e=(e=e.replaceAll("=","")).replaceAll("-","+")).replaceAll("_","/")).map(function(e){return parseInt(e,2)})}function u(e){for(var r,s="",t=e.length,a=0;a<t;a++)s+=String.fromCodePoint((r=e[a])>251&&r<254&&a+5<t?(r-252)*1073741824+(e[++a]-128<<24)+(e[++a]-128<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:r>247&&r<252&&a+4<t?(r-248<<24)+(e[++a]-128<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:r>239&&r<248&&a+3<t?(r-240<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:r>223&&r<240&&a+2<t?(r-224<<12)+(e[++a]-128<<6)+e[++a]-128:r>191&&r<224&&a+1<t?(r-192<<6)+e[++a]-128:r);return s}function p(e){try{if(3!==e.split(".").length||"string"!=typeof e)return null;var r=e.split(".")[1],s=d(r),t=decodeURIComponent(u(s));return JSON.parse(t)}catch(e){return console.error("There was an error decoding token: ",e),null}}},95850:(e,r,s)=>{s.r(r),s.d(r,{default:()=>N});var t=s(67557),a=s(41577),n=s.n(a),l=s(65907),o=s.n(l),i=s(18198),c=s(13008),d=s(70317),u=s.n(d),p=s(16390),m=s(78343),f=s(51534),h=s(65716),x=s(37682),g=s(95261),w=s(29495),v=s(79867);function j(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function y(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{},t=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),t.forEach(function(r){j(e,r,s[r])})}return e}var b=function(){var e,r=(0,d.useNavigate)(),s=(0,d.useLocation)(),n=o().parse(s.search.substring(1)),l=null;if(null==n?void 0:n.token)try{l=(0,c.TD)(n.token)}catch(e){l=null}var u=(null===(e=l)||void 0===e?void 0:e.email)||(null==n?void 0:n.email)||"",j=(0,i.cI)({defaultValues:{password:"",repeat_password:""}}),b=j.register,N=j.handleSubmit,k=j.formState.errors,Z=j.setError,O=(0,a.useAdminResetPassword)(),P=(0,g.Z)(),S=N(function(e){if(e.password!==e.repeat_password){Z("repeat_password",{type:"manual",message:"Passwords do not match"},{shouldFocus:!0});return}O.mutate({token:n.token,password:e.password,email:u},{onSuccess:function(){r("/login")},onError:function(e){P("Error",(0,w.e)(e),"error")}})});return(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(h.Z,{title:"Reset Password"}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center",children:l?(0,t.jsx)("form",{onSubmit:S,children:(0,t.jsxs)("div",{className:"gap-y-large flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"inter-xlarge-semibold",children:"Reset your password"}),(0,t.jsxs)("div",{className:"gap-y-small flex flex-col items-center",children:[(0,t.jsx)(f.Z,{placeholder:"Email",disabled:!0,readOnly:!0,value:u}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Z,y({placeholder:"Password (8+ characters)",type:"password"},b("password",{required:v.Z.required("Password")}))),(0,t.jsx)(p.Z,{errors:k,name:"password"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Z,y({placeholder:"Confirm password",type:"password"},b("repeat_password",{required:"You must confirm your password"}))),(0,t.jsx)(p.Z,{errors:k,name:"repeat_password"})]})]}),(0,t.jsx)(m.Z,{variant:"secondary",size:"medium",className:"w-[280px]",children:"Reset password"}),(0,t.jsx)("a",{href:"/login",className:"inter-small-regular text-grey-40 mt-xsmall",children:"Go back to sign in"})]})}):(0,t.jsxs)("div",{className:"gap-y-large flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"gap-y-xsmall flex flex-col text-center",children:[(0,t.jsx)("h1",{className:"inter-xlarge-semibold text-[20px]",children:"Your reset link is invalid"}),(0,t.jsx)("p",{className:"text-grey-50 inter-base-regular",children:"Try resetting your password again."})]}),(0,t.jsx)("a",{href:"/login?reset-password=true",children:(0,t.jsx)(m.Z,{variant:"secondary",size:"medium",className:"w-[280px]",children:"Go to reset password"})})]})})]})};let N=b}}]);