"use strict";(self.webpackChunkmedia_products=self.webpackChunkmedia_products||[]).push([[185],{13008:(e,r,t)=>{t.d(r,{TD:()=>p});for(var n=t(89526),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Map,o=0;o<a.length;o++){var l=o.toString(2),i=6-l.length;l="0".repeat(i)+l,s.set(a.charCodeAt(o),l)}function c(e){for(var r="",t=0;t<e.length;t++)r+=s.get(e.charCodeAt(t));r=r.slice(0,r.length-r.length%8);for(var n=[],a=0;a<r.length/8;a++)n.push(r.slice(8*a,8*a+8));return n}function u(e){return c(e=(e=(e=e.replaceAll("=","")).replaceAll("-","+")).replaceAll("_","/")).map(function(e){return parseInt(e,2)})}function d(e){for(var r,t="",n=e.length,a=0;a<n;a++)t+=String.fromCodePoint((r=e[a])>251&&r<254&&a+5<n?(r-252)*1073741824+(e[++a]-128<<24)+(e[++a]-128<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:r>247&&r<252&&a+4<n?(r-248<<24)+(e[++a]-128<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:r>239&&r<248&&a+3<n?(r-240<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:r>223&&r<240&&a+2<n?(r-224<<12)+(e[++a]-128<<6)+e[++a]-128:r>191&&r<224&&a+1<n?(r-192<<6)+e[++a]-128:r);return t}function p(e){try{if(3!==e.split(".").length||"string"!=typeof e)return null;var r=e.split(".")[1],t=u(r),n=decodeURIComponent(d(t));return JSON.parse(n)}catch(e){return console.error("There was an error decoding token: ",e),null}}},7185:(e,r,t)=>{t.r(r),t.d(r,{default:()=>z});var n=t(67557),a=t(41577),s=t.n(a),o=t(65907),l=t.n(o),i=t(89526),c=t(18198),u=t(13008),d=t(70317),p=t.n(d),f=t(16390),m=t(78343),h=t(51534),y=t(65716),x=t(37682),g=t(95261),b=t(29495),v=t(79867),w=t(80889),j=t(27132),O=t(2084);function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function S(e){if(Array.isArray(e))return e}function _(e,r,t,n,a,s,o){try{var l=e[s](o),i=l.value}catch(e){t(e);return}l.done?r(i):Promise.resolve(i).then(n,a)}function P(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var s=e.apply(r,t);function o(e){_(s,n,a,o,l,"next",e)}function l(e){_(s,n,a,o,l,"throw",e)}o(void 0)})}}function k(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e,r){var t,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var s=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(t=a.next()).done)&&(s.push(t.value),!r||s.length!==r);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return s}}function C(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){k(e,r,t[r])})}return e}function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function L(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function D(e,r){return S(e)||N(e,r)||E(e,r)||C()}function E(e,r){if(e){if("string"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,r)}}function T(e,r){var t,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(t)throw TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=r.call(e,o)}catch(e){s=[6,e],n=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var M=function(){var e,r=(0,d.useLocation)(),t=l().parse(r.search.substring(1)),s=D((0,i.useState)(!1),2),o=s[0],p=s[1],A=!!t.first_run,S=null;if(null==t?void 0:t.token)try{S=(0,u.TD)(t.token)}catch(e){S=null}var _=(0,c.cI)({defaultValues:{first_name:"",last_name:"",password:"",repeat_password:"",analytics:{opt_out:!1,anonymize:!1}}}),k=_.register,N=_.handleSubmit,C=_.formState.errors,I=_.setError,E=(0,a.useAdminAcceptInvite)(),M=E.mutateAsync,z=E.isLoading,q=(0,w.F2)(),Y=q.mutateAsync,F=q.isLoading,G=(0,a.useAdminLogin)(),U=G.mutateAsync,J=G.isLoading,R=(0,d.useNavigate)(),V=(0,g.Z)(),B=N((e=P(function(e){var r,n,a,s;return T(this,function(o){switch(o.label){case 0:if(e.password!==e.repeat_password)return I("repeat_password",{type:"manual",message:"Passwords do not match"},{shouldFocus:!0}),[2];o.label=1;case 1:return o.trys.push([1,7,,8]),[4,M({token:t.token,user:{first_name:e.first_name,last_name:e.last_name,password:e.password}})];case 2:return o.sent(),[4,U({email:S.user_email,password:e.password})];case 3:return o.sent(),n=!e.analytics.anonymize&&!e.analytics.opt_out&&(null===(r=S)||void 0===r?void 0:r.user_email),[4,Y(e.analytics)];case 4:if(o.sent(),!n)return[3,6];return[4,w.co.track("userEmail",{email:null===(a=S)||void 0===a?void 0:a.user_email})];case 5:o.sent(),o.label=6;case 6:return R("/a/orders"),[3,8];case 7:return s=o.sent(),V("Error",(0,b.e)(s),"error"),[3,8];case 8:return[2]}})}),function(r){return e.apply(this,arguments)}));return S?(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(y.Z,{title:"Create Account"}),o?(0,n.jsx)("form",{onSubmit:B,children:(0,n.jsxs)("div",{className:"flex w-[300px] flex-col items-center",children:[(0,n.jsx)("h1",{className:"inter-xlarge-semibold mb-large text-[20px]",children:"Create your Medusa account"}),(0,n.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h.Z,{readOnly:!0,placeholder:S.user_email})}),(0,n.jsx)("div",{children:(0,n.jsx)(h.Z,L(Z({placeholder:"Password",type:"password"},k("password",{required:v.Z.required("Password")})),{autoComplete:"new-password"}))}),(0,n.jsxs)("div",{children:[(0,n.jsx)(h.Z,L(Z({placeholder:"Confirm password",type:"password"},k("repeat_password",{required:"You must confirm your password"})),{autoComplete:"new-password"})),(0,n.jsx)(f.Z,{errors:C,name:"repeat_password"})]})]}),(0,n.jsx)("div",{className:"gap-y-small my-8 flex w-[300px] flex-col",children:(0,n.jsx)(j.Z,{form:(0,O.G)(_,"analytics"),compact:!0})}),(0,n.jsx)(m.Z,{variant:"secondary",size:"medium",className:"mt-large w-[300px]",loading:z||F||J,children:"Create account"}),(0,n.jsxs)("p",{className:"inter-small-regular text-grey-50 mt-xlarge",children:["Already signed up? ",(0,n.jsx)("a",{href:"/login",children:"Log in"})]})]})}):(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("h1",{className:"inter-xlarge-semibold text-[20px]",children:A?"Let's get you started!":"You have been invited to join the team"}),A?(0,n.jsxs)("p",{className:"inter-base-regular text-grey-50 mt-xsmall",children:["Create an admin account to access your ",(0,n.jsx)("br",{})," Medusa dashboard."]}):(0,n.jsxs)("p",{className:"inter-base-regular text-grey-50 mt-xsmall",children:["You can now join the team. Sign up below and get started",(0,n.jsx)("br",{}),"with your Medusa account right away."]}),(0,n.jsx)(m.Z,{variant:"secondary",size:"medium",className:"mt-xlarge w-[300px]",onClick:function(){return p(!0)},children:"Sign up"})]})]}):(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(y.Z,{title:"Create Account"}),(0,n.jsxs)("div",{className:"gap-y-xsmall flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"inter-xlarge-semibold mb- text-[20px]",children:"Invalid invite"}),(0,n.jsx)("p",{className:"inter-base-regular text-grey-50 w-[280px] text-center",children:"The invite link you have used is invalid. Please contact your administrator."}),(0,n.jsxs)("p",{className:"inter-small-regular text-grey-40 mt-xlarge",children:["Already have an account? ",(0,n.jsx)("a",{href:"/login",children:"Log in"})]})]})]})};let z=M}}]);